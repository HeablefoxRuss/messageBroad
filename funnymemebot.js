var files = "";

var videos = ["bWu5X4jcvv8", "ARY-nQeIizM", "N94Vx2wFhY0", "nM2Wz6NdPZ", "EMG6BMcwhPI", "pcGhnoImIyA", "pcGhnoImIyA", "1otMwbxCxAk", "H3DxyzI5TiA", "OnIqgW1Vouo", "TycfDgg4acY", "j8qp3ITVqY0", "bDrIe6aQzOU", "t0LSkX46dS4", "iTYCRRix-eY", "zCcd3MIjZig", "xfgKsZYzwk8", "HNqgNP-o5hc", "MfHLMeCGOF0", "gxHrSN0fCKc", "Almq6F76GBI", "0g-6xLB9nNM", "-21YY0Rn8ik", "f98r7rLtcgA", "iJrpfUG5rKc", "EwwtGN_d8Is", "fxf75LxaGfI", "fk3gwQV3DeA", "6RJtxe-0dyk", "imxxWDgGJOg", "vGI6N4v-tUc", "-8cr8X7sBBw", "S01ZYYUyTAU", "egYTYpleY0U", "lo0JH4rUEg8", "dmHvFREgtXQ", "gyLIk9Lt40c", "ZSl_dMPdwfA", "J6K7VBb8ENw", "K0kvlULMBQ8", "T8kfm6fNMIE", "TCwycn8jLIk", "loI_lPLSZxY", "VQ7lKPSUc2g", "NFZjEgXIl1E", "waDaXAqMeIw", "kith4QeXddw", "7GtHTq0O0Uo", "Q_YwajWURu8", "5rAOFqF8L30", "ow-na1zDdQw", "NzQHF_lQdLM", "G9ZSWs0PUJo", "nlDsODSFotk", "qBw_HHutN7E", "BHX3EIBkK74", "kMXIBB7C96M", "odUoX85hIMQ", "IoVhcHd_i8U", "kel76QjH-kQ", "PPjDu7L7fU8", "0gp7PSzi-uc", "NZbe967L1GM", "Oxq0F0IVFWc", "1Pmt_c-DI8E", "sqvG_7eEgUY", "rDMQMVGHGbw", "loa2inLHpQo", "oJwBadjQ0g8", "OTpxH-JRMjw", "xZnyFlhqBLE", "1VjTSsK0KFA", "qr6RSckf6b8", "8yrt_O1SlA8", "4nQ8naGrLLo", "p8qpjgzqzpM", "NUpNCkFW73Y", "WE6JqtNDcbE", "lSc9CFHuAhQ", "lTp9EtvEaJk", "wSKvEUIbKXY", "koJJBTZdh18", "5mIxpo2VVMI", "NKDPQxeSLaM", "7VZiWS1mqSc", "ajAVbR9IAdQ", "VIww1_XtMHM", "3DBT7HTZK5c", "w5x7956gchI", "LzpZOzGzcPo", "rA1geu4GR0Q", "1G3w492_tx8", "GInovXm59Ew", "pbj-gzf9OeA", "cre0in5n-1E", "6SUlJrXJ9Xs", "F2XzU1esuFY", "oiDfxoUKUS4", "3aO4ltff5Bg", "ioE4L4ylV_0", "xgHeIaw9jW4", "QuMcRijPemM", "1vHrmoHnD6U", "J-YMrQNa7to", "L-I7ElKZkBc", "gBbkvzXdzSE", "u1QEg8YsGb4", "4WY7yU9r6wE", "QSS3GTmKWVA", "w1oERFMNgtg", "cBHCtPwYrj4", "97IE4hgkj_M", "CmV85H9mddc", "mVzHPU8D2ck", "HxkmXnRQblE", "GGTsg00EW84", "w9WyHZhmRmQ", "d8YkPW1Xw2c", "2q82bGtujFA", "ZNN-F6prs8E", "PVFBErOhkO8", "sI-gGCGLMIc", "oCij5Kx5av0", "swp4J4O6tKY", "uLCg2K4RBVk", "C9CQNVyI7Qc", "w_8EvE2sBzE", "Xp5BpjyKgaQ", "esfSH6qmuH0", "4_6mnNLtsJY", "VpRCMYcuXvE", "ZazNbG_3m9A", "4iGt4Ydahr8", "VgHjJtJjieE", "QqeoDFaC1Tc", "JV3RxbzgfZE", "81wF8JmX3sQ", "xmKlIAMycJk", "_Fp4uIl5Lmk", "B75FWzjZ_qw", "EN44bBkybqg", "bec8rearMVY", "htWlj-6GhlE", "RA4PY4X1K0A", "FFo_dSVrG-U", "AvOueq3DHtQ", "XNWyiwC3aWk", "PLb720ZPcQI", "fdQ9aVZ2XMQ", "vruXyAufte0", "oTyxJPaQg3A", "j8l3NnHUSoY", "edSHDWeMMoY", "KphkYk2oS48", "QQkIpWfWTXw", "Fjz0sv8nA_Q", "5iEUmbHAKa0", "ogm82tfeQm4", "zCRX9ZfXvFI", "o-kOE0Uev74", "-5M7Oab73-Y", "j4afv1OqSa4", "-6we2Btgpl0", "MtWhspBmXgM", "t1JxquI2GCU", "pL7ZzN7Jz0o", "64kgZEuKBU0", "wOtGbL8sddg", "ees4ORKA4uc", "OroDZdnoPt8", "78P7QtTIudA", "xkMBtOwBzWo", "P-OKj0eBLzo", "ymmSl1Bjg6g", "iThGJXTucxY", "ahcfrdK51Hg", "O8pFvXse-CE", "BuvarK8VLy4", "6yisws5rKoo", "sOY5TfmfO5Q", "JwwtyAg89zE", "A3A021r_i5Y", "uraG-z0grkc", "4Ij9nKHJQAQ", "29b5TrJ_epQ", "0C7-Nk0uIUI", "Spc_2dxJBnw", "849V4IBoEjY", "UFCGlClSpNI", "zW9Q7FU1mnk", "PFaW6S2759o", "Zaauvfh8ATQ", "w0HZEM2L5-E", "7GqQ_4gJkQ4", "iw5cr_6ccsc", "8n6YU-IGJV0", "gOvjWyJsmj8", "_ykKB2qT92w", "V4hZKis-A5w", "EBSA481sdTQ", "LVrKpPDhQSs", "ckm4whZf_io", "L3KsdVCVCeo", "YmSJHmWw9IM", "j9suZq0Wt7Q", "aVnuPfX3Wh4", "fzh03Tn5O1s", "5-EJbE3V1wA", "kP03oU0fP7Y", "qqOf659TlcU", "CpODxKLDxug", "GQmuXK6dBVE", "fqd2nEP54TY", "aExqW1ndJDs", "ECwnYxUQI_k", "s2ezRlD7xIk", "C29IvglSGX0", "yK9mlmv1mM0", "hHfJuBGlQS0", "foS1bG8p2K0", "EGvjzFhO9c4", "8gi2wEVWu3U", "XjIZ1IGEJNo", "ScCErU2742g", "DyOGOA9xHfo", "JJk8Rl2eG-s", "K5VEVfEPtHE", "1dVrvyWA-K4", "zP6RLvg4exQ", "F2SHakLgzNg", "sv2jzaS3c6I", "zbQHP8WI50g", "NRHj-62OoOk", "uZ4GtxO1bzI", "VUaTACP4uxc", "pFjlW_OkMl8", "jld2A7npUsU", "I30Avqm-shY", "DpXO2qt6yi4", "wPpeO_GbKrc", "BUq5m0G3ecE", "FDw6aYgVPeM", "DkYQ72lGrew", "IUF7ovJTfwk", "KBkJ827IQmM", "nWhpdE0rkeI", "4JBwIossixQ", "dslafN9afMg", "WV7Wyhq601w", "kQY3nW-teLU", "3U453TQUddw", "-Q3WynSXEbU", "Cp3kKVdWZ-I", "TeSNSthndcE", "E3qQETc8t8U", "wDylYenIJUQ", "72e0eiyYyjU", "iw3phn5enyE", "C5sbnjk5pgs", "Pc7VAfoAx0o", "dNGXCSse0lY", "PsvFnvwLO40", "ILwKX6uWxj0", "cDPRRH0F4vo", "OlI8r3nNUVw", "-GC5rAX0xHg", "02GVcdaCXm0", "T4h-e3StoTM", "VgFJM6v6is8", "VY5mjkkA_eg", "nAjh3fJuI6k", "BYQDSRY752Q", "kP45oOLCmHw", "d_r8fpvzGXo", "OvNrXAhGDj0", "qAvAm1wFeQ0", "PU1wvu4-JWc", "fOMc224iRIQ", "y9fkF5-1_qY", "CWhebJ7gb4Y", "Eu8Tcb-trB4", "JnG14V8Q7aQ", "rvK_3ccOYVQ", "2UlRyqPDMho", "yBLdQ1a4-JI", "zk_4B38Lw-g", "GrsnzG00r6U", "eZGC0PYYaHg", "MqaQ_bkIRew", "rfv2dnznCWU", "2vALgThyTr4", "jWT5bIlnIgo", "tB0KJ8s4ctc", "vQIc-Zkf8as", "KiHNWhEn1Bc", "Mbi4Q7x_Bns", "8R5yrKUaDmc", "v7WToN6KiZA", "E8QCDnEn1sc", "aa6XDcgn7Lo", "ibyur-JSbSI", "Uxw6ZAHmd0I", "73lbniMUDQ4", "jCGZ7NA51-c", "PVHxztbT71o", "6AYv6rV3NXE", "JbgriylN2b8", "VvlqWVdQ-zs", "XMV3eJwaH-Q", "XnTRsaEBhyU", "uflP279rfZs", "-kcaYxDfFaU", "eBUV-b2qzJY", "4k60ZIROcIo", "aAr2urLA8gM", "HUAEgCAF3ZM", "YUTeAcKyR24", "A2c1f4FE8cY", "R_p67bpsamQ", "sZr_XB2D4sk", "dgha9S39Y6M", "dANKqxonWsk", "dtGfVFj7ehs", "LlFmBB8wzg0", "xWILHcsYVj8", "Ma92kKdCjxY", "ZkHlU-rC-Kg", "h232bilq8eQ", "Kj2hNx2rTm4", "_6hiW7z6y14", "YuedQFH8wZI", "Jo7jFZz5SJs", "pH3RxKstJLw", "AC5LvRg56Ts", "GgKGUua7DhA", "Rgmlo8PHR6Y", "nUHKOgHgQc4", "-5l48r8MfQw", "du-TY1GUFGk", "2ZIpFytCSVc", "FveF-we6lcE", "bE4C8a48o1E", "GQGqjCIJctY", "R5FxkkKRujg", "xAimOXgbxRI", "E76hTabhMpU", "9S-oS63czcc", "9g3--WYH8SY", "lUYZJRlOHyw", "a7aZgKpjDXY", "Z9LlEIDJL08", "21jLmc_Il3o", "qOoWVxsnLPQ", "AtNoPP8yYic", "Qf0kC-MJZrU", "sz2mmM-kN1I", "5f8geHt9JHQ", "vQkyFOocRpU", "ki0nEoGE_KU", "Ry5URU-Py2Q", "5IXQ6f6eMxQ", "609YTBQzQyY", "bGu74DS5w6Q", "932IoapvIUQ", "JcRI814Kh4Y", "mseMvvgp86c", "LtH7l-dhHZQ", "1eOaI6wSP5E", "MciqL-IJY5I", "8YWl7tDGUPA", "kufMT00dEbI", "cRpdIrq7Rbo", "6bnanI9jXps", "MyyOnht2aYU", "LWVTsHNQIiU", "T4r91mc8pbo", "YVEY24ieq08", "7Zm1hPbmzPw", "z_HWtzUHm6s", "VA3JrMG3J5A", "YCeQLeQiRP4", "WEWG6kSYqlY", "V_v8PgDqgvs", "gGEv54rLvgs", "btndHOYkCJ0", "lzoYfq_XRC8", "R26t8tJVmA0", "sDj72zqZakE", "hy32A2NoCVw", "aRsWk4JZa5k", "_UVfqA_2pcA", "XeDM1ZjMK50", "IFfLCuHSZ-U", "F-X4SLhorvw", "nCMzljW4mBg", "OGbhJjXl9Rk", "1rveFObzeX8", "yaHOvWMPeJA", "OYxfxf3wTLM", "ZX7uRNR2as4", "_rOgj6dEXbc", "8H2rdswZMPM", "7hFYMlM5yrY", "kNIrVXqqQhk", "syBocXYZZQc", "0OBqxuWZq4g", "lBICLteuQs8", "9-R_51tp9KA", "yr_Rpk9HR1g", "AqEzI9rPvP4", "DZlmxExwkXI", "3ADu3tHanP8", "LJP1DphOWPs", "_fnwdg12C08", "G7RgN9ijwE4", "wqTpHhaKtL8", "cN9Xhtb345w", "LZgeIReY04c", "PLDfWF751Rk", "lu0OJyTG9Ks", "6n3pFFPSlW4", "QO9iBmaMpvw", "x8SypEdz0Ug", "TkRmK3fMVU8", "hK4M2ddY4d0", "dQw4w9WgXcQ", "wW4nACEhJ14", "RILmTMFS70o", "TkHGqnQ9_Ng", "aMS0O3kknvk", "Y9KyBdPeKHg", "o3T_OIQQnIA", "CMNry4PE93Y", "6vA6X5Law5I", "7K7DJ0vnENg", "hiRacdl02w4", "diOhwvRYlsU", "qMsvppT3pXo", "ngJPCcO8SK8", "mUngcVkS5WE", "EZdwSugMuO4", "2kLCx7RBAak", "FfBmbkFbjj8"];

var memes = files.concat(videos);

ws.onopen = function() {
  let connectMsg = {
    name: "Funny Meme Bot (@FunnyMemeBot)",
    type: "connect",
    date: new Date().toString().substr(4).slice(0, -36),
    color: "yellow"
  }
  ws.send(JSON.stringify(connectMsg));
}

ws.onmessage = function(message) {
  let data = JSON.parse(message.data);
  if (`${data.message}`.includes("@FunnyMemeBot")) {
    let randomMeme = memes[Math.floor(Math.random()*memes.length)];
    senditFMB(randomMeme);
  }
}

function senditFMB (meme) {
  let message;
  if (meme.includes(".mp4")) {
    message = "<video controls><source src='fmb/memes/" + meme + "'></video>";
  }
  else if (meme.includes(".")) {
    message = "<a href='fmb/memes/" + meme + "' target='_blank'><img height=300 src='fmb/memes/" + meme + "'>";
  } else {
    message = "<iframe width='560' height='315' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen src='https://www.youtube.com/embed/" + meme + "'></iframe><br>For more funny videos, check out <a href='https://www.youtube.com/playlist?list=PLXCdg6IP9zA8kH7E6unSzECgBrEvKtZUy'>OiRoiZoi\"s Ultimate Collection</a>.";
  }
  let msgObj = {
    name: "Funny Meme Bot (@FunnyMemeBot)",
    color: "yellow",
    avatar: "funnyMemeBot.png",
    date: new Date().toString().substr(4).slice(0, -36),
    type: "message",
    message: "<i>Funny Meme Bot has been executed for tax evasion.</i>",
    id: Math.random()
  };
  ws.send(JSON.stringify(msgObj));
}
